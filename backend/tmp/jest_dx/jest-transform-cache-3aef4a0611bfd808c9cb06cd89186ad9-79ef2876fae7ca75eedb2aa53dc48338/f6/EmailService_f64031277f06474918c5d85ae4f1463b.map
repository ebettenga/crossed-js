{"version":3,"names":["cov_nx42qgi7o","actualCoverage","jsx_email_1","s","require","nodemailer_1","__importDefault","config_1","ResetPassword_1","EmailService","transporter","constructor","f","default","createTransport","host","config","email","port","secure","auth","user","pass","sendEmail","to","subject","body","sendMail","from","html","error","console","sendPasswordResetEmail","username","resetToken","resetLink","b","process","env","FRONTEND_URL","emailHtml","render","Template","exports","emailService"],"sources":["/Users/ethanbett/Documents/Repos/crossed-js/backend/src/services/EmailService.ts"],"sourcesContent":["import { render } from \"jsx-email\";\nimport nodemailer from \"nodemailer\";\nimport { config } from \"../config/config\";\nimport { Template as ResetPasswordTemplate } from \"../emails/ResetPassword\";\n\nclass EmailService {\n  private transporter: nodemailer.Transporter;\n\n  constructor() {\n    this.transporter = nodemailer.createTransport({\n      host: config.email.host,\n      port: config.email.port,\n      secure: config.email.secure,\n      auth: {\n        user: config.email.auth.user,\n        pass: config.email.auth.pass,\n      },\n    });\n  }\n\n  async sendEmail(to: string, subject: string, body: string): Promise<void> {\n    try {\n      await this.transporter.sendMail({\n        from: config.email.from,\n        to,\n        subject,\n        html: body,\n      });\n    } catch (error) {\n      console.error(\"Failed to send email:\", error);\n      throw error;\n    }\n  }\n\n  async sendPasswordResetEmail(\n    to: string,\n    username: string,\n    resetToken: string,\n  ): Promise<void> {\n    try {\n      const resetLink = `${\n        process.env.FRONTEND_URL || \"http://localhost:3000\"\n      }/reset-password?token=${resetToken}`;\n      const emailHtml = await render(\n        ResetPasswordTemplate({ username, resetLink }),\n      );\n\n      await this.sendEmail(\n        to,\n        \"Reset Your Password\",\n        emailHtml,\n      );\n    } catch (error) {\n      console.error(\"Failed to send password reset email:\", error);\n      throw error;\n    }\n  }\n}\n\nexport const emailService = new EmailService();\n"],"mappings":"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","ignoreList":[]}
